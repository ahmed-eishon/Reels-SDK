# Release Process

## Overview

This document describes the release process for the Reels SDK. Build artifacts (xcframeworks) are **NOT** committed to git - they are generated during the release process by CI/CD.

## Why Build Artifacts Are Not in Git

Build artifacts are excluded from git because:
- They are large files (50MB-120MB) that exceed GitHub's limits
- They can be regenerated from source code
- They bloat the git repository size
- They should match the exact source code of each release

## Build Artifacts Required for Releases

The following artifacts are needed for SDK releases:

### iOS Frameworks (generated by `flutter build ios-framework`)
```
reels_ios/Frameworks/Release/
├── App.xcframework
├── Flutter.xcframework (120MB with debug symbols)
├── FlutterPluginRegistrant.xcframework
├── package_info_plus.xcframework
├── video_player_avfoundation.xcframework
└── wakelock_plus.xcframework
```

These are gitignored but will be generated during CI/CD pipeline.

## Local Development

For local development and testing, generate frameworks using:

```bash
./scripts/build-flutter-frameworks.sh
```

This creates the frameworks in `reels_ios/Frameworks/Release/` for local integration testing.

**⚠️ DO NOT commit these files to git!** A pre-commit hook will prevent this.

## Release Scripts (TODO)

The following CI/CD pipeline should be implemented:

### 1. Build Phase
```bash
# CI/CD will run these commands:
flutter pub get
flutter build ios-framework --release --output=reels_ios/Frameworks/
```

### 2. Package Phase
- Create xcframework archives
- Generate CocoaPods podspec
- Create Swift Package Manager package
- Generate release notes

### 3. Publish Phase
- Tag release in git (e.g., `v1.0.0`)
- Create GitHub release with artifacts attached
- Publish to CocoaPods (if applicable)
- Update package registries

### 4. Documentation Phase
- Generate API documentation
- Update integration guides
- Publish release notes

## Git Protection

A pre-commit hook (`.git/hooks/pre-commit`) prevents accidentally committing:
- Files larger than 50MB
- Build artifacts in gitignored directories

To bypass (NOT recommended):
```bash
git commit --no-verify
```

## Future Work

When implementing the release pipeline, consider:
- Automated versioning (semantic versioning)
- Automated changelog generation
- Integration testing before release
- Binary size optimization
- Debug symbol stripping for distribution
- Code signing for frameworks

## Notes for AI Agents

When working on release scripts, remember:
1. Build artifacts MUST be generated during release, not committed
2. Use `flutter build ios-framework` to generate xcframeworks
3. Include all Flutter plugins in the release package
4. Test the generated frameworks before publishing
5. Document the release process for manual releases if CI/CD is unavailable
